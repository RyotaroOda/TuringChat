{"ast":null,"code":"import { io } from \"socket.io-client\";\n\n// サーバーとの接続を作成\nconst socket = io(\"http://localhost:3000\", {\n  transports: [\"websocket\"] // 必要に応じて設定\n});\n\n// サーバーとの接続状態をログに出力\nsocket.on(\"connect\", () => {\n  console.log(\"Connected to server\");\n});\nsocket.on(\"disconnect\", () => {\n  console.log(\"Disconnected from server\");\n});\n\n// メッセージを送信\nexport const sendMessage = (roomId, message) => {\n  socket.emit(\"sendMessage\", {\n    roomId,\n    message\n  });\n  console.log(\"Sent socket message:\", message);\n};\n\n// サーバーからメッセージを受け取るリスナー\nexport const onMessageReceived = callback => {\n  socket.on(\"receiveMessage\", callback);\n  console.log(\"Listening for messages...\");\n};\n\n//マッチングリクエストを送信\nexport const requestMatch = () => {\n  socket.emit(\"requestMatch\");\n};\n\n//プレイヤー名を設定\nexport const savePlayerName = playerName => {\n  socket.emit(\"savePlayerName\", playerName);\n};\n\n//マッチング成功時の処理\nexport const onMatchFound = callback => {\n  socket.on(\"matchFound\", callback);\n};\n\n// ターン更新リスナー\nexport const onTurnUpdate = callback => {\n  socket.on(\"activePlayerUpdate\", callback);\n};\n\n// メッセージ数更新リスナー\nexport const onTurnCountUpdate = callback => {\n  socket.on(\"turnCountUpdate\", callback);\n};\n\n// バトル終了リスナー\nexport const onBattleEnd = callback => {\n  socket.on(\"battleEnd\", callback);\n};\nexport default socket;","map":{"version":3,"names":["io","socket","transports","on","console","log","sendMessage","roomId","message","emit","onMessageReceived","callback","requestMatch","savePlayerName","playerName","onMatchFound","onTurnUpdate","onTurnCountUpdate","onBattleEnd"],"sources":["/Users/ryotarooda/Desktop/卒論/TuringChats/TuringChat-D4/frontend/src/services/socket.ts"],"sourcesContent":["import { io, Socket } from \"socket.io-client\";\n\n// サーバーとの接続を作成\nconst socket: Socket = io(\"http://localhost:3000\", {\n  transports: [\"websocket\"], // 必要に応じて設定\n});\n\n// サーバーとの接続状態をログに出力\nsocket.on(\"connect\", () => {\n  console.log(\"Connected to server\");\n});\n\nsocket.on(\"disconnect\", () => {\n  console.log(\"Disconnected from server\");\n});\n\n// メッセージを送信\nexport const sendMessage = (roomId: string, message: string) => {\n  socket.emit(\"sendMessage\", { roomId, message });\n  console.log(\"Sent socket message:\", message);\n};\n\n// サーバーからメッセージを受け取るリスナー\nexport const onMessageReceived = (\n  callback: (data: { senderId: string; message: string }) => void,\n) => {\n  socket.on(\"receiveMessage\", callback);\n  console.log(\"Listening for messages...\");\n};\n\n//マッチングリクエストを送信\nexport const requestMatch = () => {\n  socket.emit(\"requestMatch\");\n};\n\n//プレイヤー名を設定\nexport const savePlayerName = (playerName: string) => {\n  socket.emit(\"savePlayerName\", playerName);\n};\n\n//マッチング成功時の処理\nexport const onMatchFound = (\n  callback: (data: {\n    roomId: string;\n    opponentId: string;\n    opponentName: string;\n    battleConfig: any;\n  }) => void,\n) => {\n  socket.on(\"matchFound\", callback);\n};\n\n// ターン更新リスナー\nexport const onTurnUpdate = (callback: (data: { roomData: any }) => void) => {\n  socket.on(\"activePlayerUpdate\", callback);\n};\n\n// メッセージ数更新リスナー\nexport const onTurnCountUpdate = (\n  callback: (data: { messageCount: number }) => void,\n) => {\n  socket.on(\"turnCountUpdate\", callback);\n};\n\n// バトル終了リスナー\nexport const onBattleEnd = (callback: (data: { roomId: string }) => void) => {\n  socket.on(\"battleEnd\", callback);\n};\n\nexport default socket;\n"],"mappings":"AAAA,SAASA,EAAE,QAAgB,kBAAkB;;AAE7C;AACA,MAAMC,MAAc,GAAGD,EAAE,CAAC,uBAAuB,EAAE;EACjDE,UAAU,EAAE,CAAC,WAAW,CAAC,CAAE;AAC7B,CAAC,CAAC;;AAEF;AACAD,MAAM,CAACE,EAAE,CAAC,SAAS,EAAE,MAAM;EACzBC,OAAO,CAACC,GAAG,CAAC,qBAAqB,CAAC;AACpC,CAAC,CAAC;AAEFJ,MAAM,CAACE,EAAE,CAAC,YAAY,EAAE,MAAM;EAC5BC,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAC;AACzC,CAAC,CAAC;;AAEF;AACA,OAAO,MAAMC,WAAW,GAAGA,CAACC,MAAc,EAAEC,OAAe,KAAK;EAC9DP,MAAM,CAACQ,IAAI,CAAC,aAAa,EAAE;IAAEF,MAAM;IAAEC;EAAQ,CAAC,CAAC;EAC/CJ,OAAO,CAACC,GAAG,CAAC,sBAAsB,EAAEG,OAAO,CAAC;AAC9C,CAAC;;AAED;AACA,OAAO,MAAME,iBAAiB,GAC5BC,QAA+D,IAC5D;EACHV,MAAM,CAACE,EAAE,CAAC,gBAAgB,EAAEQ,QAAQ,CAAC;EACrCP,OAAO,CAACC,GAAG,CAAC,2BAA2B,CAAC;AAC1C,CAAC;;AAED;AACA,OAAO,MAAMO,YAAY,GAAGA,CAAA,KAAM;EAChCX,MAAM,CAACQ,IAAI,CAAC,cAAc,CAAC;AAC7B,CAAC;;AAED;AACA,OAAO,MAAMI,cAAc,GAAIC,UAAkB,IAAK;EACpDb,MAAM,CAACQ,IAAI,CAAC,gBAAgB,EAAEK,UAAU,CAAC;AAC3C,CAAC;;AAED;AACA,OAAO,MAAMC,YAAY,GACvBJ,QAKU,IACP;EACHV,MAAM,CAACE,EAAE,CAAC,YAAY,EAAEQ,QAAQ,CAAC;AACnC,CAAC;;AAED;AACA,OAAO,MAAMK,YAAY,GAAIL,QAA2C,IAAK;EAC3EV,MAAM,CAACE,EAAE,CAAC,oBAAoB,EAAEQ,QAAQ,CAAC;AAC3C,CAAC;;AAED;AACA,OAAO,MAAMM,iBAAiB,GAC5BN,QAAkD,IAC/C;EACHV,MAAM,CAACE,EAAE,CAAC,iBAAiB,EAAEQ,QAAQ,CAAC;AACxC,CAAC;;AAED;AACA,OAAO,MAAMO,WAAW,GAAIP,QAA4C,IAAK;EAC3EV,MAAM,CAACE,EAAE,CAAC,WAAW,EAAEQ,QAAQ,CAAC;AAClC,CAAC;AAED,eAAeV,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}